# 作業 5 報告

> 學生：曾文鼎
>
> 學號：0716023

## 作業 5 心得

因為前幾次作業都蠻從容應付的，加上老師說比前幾次簡單，這次就疏忽了。前幾次最多花 8 個小時左右，想說這次保留 12 個小時可以全部搞定，結果寫不完 = = 以後作業一定要提早開寫。

觀察幾次作業以來，助教給的 code 都非常用心，而且比自己寫的還實用，因此每次作業都很依賴。這次也一樣，但 HW5 助教給的 Semantic Analyzer 設計上有些明顯的瑕疵，用起來不太方便。最直接的問題就是，先前提過的 visitor pattern， `AstNode` 僅負責儲存資料，不負責任何其他的功能；然而這次作業中部分 `AstNode` （例如 `ProgramNode`） 中竟然儲存了 symbol table 的資料 ，已經違反 visitor pattern 。簡之，絕大部分 `AstNode` 提供的函數都是 const 的，但 `AstNodeVisitor.visit` 卻不是。這導致了要在 `AstNodeVisitor.visit` 中修改藉由 `const SymbolTable* XXXNode::getSymbolTable() const` 取得的 symbol table 時，屢屢被編譯器警告。

這是第一次嘗試把高等語言往低等語言的路鋪出來，雖然沒有全拿，但我覺得自己對於編譯器這東西已經有基本的掌握。雖然自己以後未必靠這個吃飯，但還是覺得很有收穫。

我覺得這次作業最大的困難在於對 RISV 這個語言非常不熟悉。像是常有的指令 `CMP` ，在這個語言中並沒有。因此在做比較運算的時候，要翻找 document 來查詢指令的名稱。

## 整學期編譯器作業心得

我覺得這門課最大的亮點就是五次非常精緻的作業，這恐怕沒有任何授課老師的課程能夠比擬，而且我相信絕大部分的同學都這樣想。

雖然自己對編譯器一點興趣都沒有，往往寫作業的時候覺得心煩意亂，但收穫絕對是有的。例如說，以前寫程式的時候，總是會覺得編譯警告呈現得很奇怪，明明是少了一個分號，卻總是提示說 `xxx should not appear here` 這類不直觀、模稜兩可的訊息。而自己實作一次編譯器後，才知道說這是因為預測下一個合法的 token 非常困難，而判斷出現錯誤的 token 卻是非常容易達成的事。

覺得自己對於課業的心態好像沒有低年級時認真。除了忙於實習或專題等等之外，像編譯器這樣過於偏門的科目自己並不總是很放在心上。雖然心裡是這樣想，但到了期末的最後，還是會覺得後悔說，學期間如果有再花多一點點心力那就好了。尤其難得遇到這麼精緻的作業，自己卻不能好好地把它寫完。

Docker 真的太有趣了。第一次寫作業時，有一種「作業竟然還能這樣玩」的驚嘆。
